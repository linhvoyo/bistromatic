#include "bistromatic.h"

char *decimal(char *charset, char *string)
{
	char *new;
	char *result;
	char *base_system;
	linked_list *powers;
	int i;
	int index;

	if (zeroed_character(decimal, charset[0]))
		return ("0");
	if (number_cmp("1", decimal) == 0)
		return ("1");
	base_system = ft_itoa(ft_strlen(charset));
	powers = create_link("1");
	result = "1";
	while (number_cmp(result, decimal) < 0)
	{
		result = multiply(result, base_system);
		if (number_cmp(result, decimal) <= 0)
			prepend_link(&powers, result);
	}
	new = initialize_characters(size(powers), charset[0]);
	index = 0;
	int index2 = 0;
	while (new[index])
	{
		if (!zeroed(decimal))
		{
			index2 = index;
			result = get_closest_base(powers, decimal, &index2);
			ft_putstr("");
			i = ft_atoi(divide(decimal, result));
			decimal = subtract(decimal, multiply(divide(decimal, result), result));
			new[index2] = charset[i];
		}
		index++;
	}
	return (new);
}
